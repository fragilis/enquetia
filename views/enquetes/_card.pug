mixin card(question)
  form.needs-validation(method="POST", action="/" + question.id, novalidate)
    .card
      .card-header.clearfix #{question.title}
        a.float-right#twitter(href=encodeURI("http://twitter.com/share?url=https://enquetia.net/" + question.id + "&text=気になるアンケートを見つけました！「" + question.title + "」&hashtags=Enquetia,アンケティア,アンケート"), target="_blank")
          img(src="/img/twitter_icon.png", width="25", height="25", alt="twitterに投稿", title="twitterに投稿")
      .card-body
        unless question.description === undefined || question.description === ''
          p.card-text #{question.description}
        unless question.hashtags === undefined || question.hashtags === ''
          p.card-text
            a #test
        input.form-control(type="hidden", name="question_id", id="question_id", value=question.id)
        input.form-control(type="hidden", name="expired_at", id="expired_at", value=question.expired_at)

        fieldset.form-group
          .row
            each answer, index in question.answers
              .form-check.mb-3.pl-5.col-xs-12.col-sm-6
                if question.answer_type === "radio" && index === 0
                  input.form-check-input(id="answer"+index, name="answer", type=question.answer_type, value=answer.id, required, disabled=question.is_expired || question.is_voted)
                else
                  input.form-check-input(id="answer"+index, name="answer", type=question.answer_type, value=answer.id, disabled=question.is_expired || question.is_voted)
                label.form-check-label(for="answer"+index) #{answer.content}
                if question.answers.length === index+1
                  .invalid-feedback どれか1つを選択してください。

        - var time_left = " "
        if question.is_expired
          - time_left += "受付は終了しました"
        else if question.is_voted
          - time_left += "投票済みです"
        else
          - time_left += "残り"
          if question.left_hours > 0
            if parseInt(question.left_hours/24) > 0
              - time_left += String(parseInt(question.left_hours/24, 10)) + "日"
            - time_left += String(parseInt(question.left_hours, 10)%24) + "時間"

        - var publish_status = ""
        if !question.is_expired
          - publish_status += " "
          if question.publish_status === 1
            - publish_status += "トップページ公開"
          else if question.publish_status === 2
            - publish_status += "トップページ非公開"

        p.card-text.mb-0.clearfix
          small.text-muted #{question.count}票 #{time_left} #{publish_status} 
            a.ml-2(href="/" + question.id + "/result") 結果を見る
          button.btn.btn-primary.btn-sm.float-right.d-none.d-sm-block(type="submit", disabled=question.is_expired || question.is_voted, onclick="($this).prop('disabled', true)") 投票する
        .clearfix
          button.btn.btn-primary.btn-sm.float-right.d-block.d-sm-none.mt-2(type="submit", disabled=question.is_expired || question.is_voted, onclick="($this).prop('disabled', true)") 投票する

